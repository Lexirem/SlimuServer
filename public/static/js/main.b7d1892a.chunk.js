(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{34:function(e,t,a){e.exports=a(63)},39:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),i=a.n(l),o=a(8),s=a(2),c=a(3),u=a(5),m=a(4),p=(a(39),a(1)),h=a(6),d=a.n(h),g=a(13),f=a(14),v=a.n(f),b=new(function(){function e(){var t=this;Object(s.a)(this,e),this.handleUpload=function(){var e=Object(g.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("file in service",a),e.prev=1,e.next=4,t.auth.post("/upload",a);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.auth=v.a.create({baseURL:"https://slimu-anime.herokuapp.com",withCredentials:!0})}return Object(c.a)(e,[{key:"signup",value:function(e){var t=e.email,a=e.password;return this.auth.post("/auth/signup",{email:t,password:a}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.email,a=e.password;return this.auth.post("/auth/login",{email:t,password:a}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}},{key:"profile",value:function(e){return this.auth.get("/profile/".concat(e)).then((function(e){return e.data}))}},{key:"editUser",value:function(){return this.auth.get("/profile/:id/edit").then((function(e){return e.data}))}}]),e}()),E=r.a.createContext(),j=E.Consumer,y=E.Provider,O=function(e){return function(t){Object(u.a)(n,t);var a=Object(m.a)(n);function n(){return Object(s.a)(this,n),a.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement(j,null,(function(a){var n=a.login,l=a.signup,i=a.user,o=a.logout,s=a.isLoggedin;return r.a.createElement(e,Object.assign({login:n,signup:l,user:i,logout:o,isLoggedin:s},t.props))}))}}]),n}(r.a.Component)},w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedin:!1,user:null,isLoading:!0},e.signup=function(t){var a=t.email,n=t.password;b.signup({email:a,password:n}).then((function(t){return e.setState({isLoggedin:!0,user:t})})).catch((function(t){var a=t.response;return e.setState({message:a.data.statusMessage})}))},e.login=function(t){var a=t.email,n=t.password;b.login({email:a,password:n}).then((function(t){return e.setState({isLoggedin:!0,user:t})})).catch((function(e){return console.log(e)}))},e.logout=function(){b.logout().then((function(){return e.setState({isLoggedin:!1,user:null})})).catch((function(e){return console.log(e)}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.me().then((function(t){return e.setState({isLoggedin:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedin:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isLoggedin,n=e.user,l=this.login,i=this.logout,o=this.signup;return t?r.a.createElement("div",null,"Loading"):r.a.createElement(y,{value:{isLoggedin:a,user:n,login:l,logout:i,signup:o}},this.props.children)}}]),a}(r.a.Component),k=a(18);var L=O((function(e){var t=e.component,a=e.isLoggedin,n=Object(k.a)(e,["component","isLoggedin"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(p.a,{to:"/"}):r.a.createElement(t,e)}}))}));var C=O((function(e){var t=e.component,a=e.isLoggedin,n=Object(k.a)(e,["component","isLoggedin"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/login"})}}))})),x=O(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.logout,n=e.isLoggedin;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",null,r.a.createElement(o.b,{to:"/",className:"home-btn"},r.a.createElement("img",{className:"logo",src:"https://res.cloudinary.com/dh2lo8p1f/image/upload/v1607674460/fotos/kisspng-slime-rancher-puddle-blushing-puddle-5abf99dd683f02.693974441522506205427_thp0a6.png",alt:"logo"}))),n?r.a.createElement("div",{className:"navbar-logged"},r.a.createElement("button",{className:"navbar-button"},r.a.createElement(o.b,{to:"/profile/".concat(t._id)},"Profile")),r.a.createElement("button",{className:"navbar-button",onClick:a},"Logout")):r.a.createElement("div",{className:"navbar-logged"},r.a.createElement(o.b,{to:"/login"},r.a.createElement("button",{className:"navbar-button"},"Login")),r.a.createElement(o.b,{to:"/signup"},r.a.createElement("button",{className:"navbar-button"},"SignUp"))))}}]),a}(n.Component)),S=O(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getAnimes=Object(g.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=0;case 2:if(!(a<=200)){e.next=11;break}return e.next=5,v.a.get("https://kitsu.io/api/edge/anime?page[limit]=20&page[offset]=".concat(a));case 5:e.sent.data.data.map((function(e){return t.push(e.attributes)})),n.setState({animeList:t}),a+=20,e.next=2;break;case 11:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=7;break;case 4:e.prev=4,e.t1=e.catch(0),console.log(e.t1);case 7:case"end":return e.stop()}}),e,null,[[0,4]])}))),n.state={animeList:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getAnimes()}},{key:"render",value:function(){return console.log(this.state.animeList,"array"),console.log(this.props),r.a.createElement("div",{className:"home"},r.a.createElement("h2",null,"Welcome to Slimu Anime 2.0"),r.a.createElement("div",{className:"animeList"},this.state.animeList?this.state.animeList.map((function(e){return r.a.createElement("div",null,r.a.createElement(o.b,{to:{pathname:"/details",state:{anime:e}}},r.a.createElement("img",{src:e.posterImage.small,alt:"anime cover"})," "))})):null))}}]),a}(n.Component)),N=a(16),A=O(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.email,r=a.password;e.props.login({email:n,password:r})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(N.a)({},n,r))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,r.a.createElement("b",null,"Email: ")),r.a.createElement("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("b",null,"Password: ")),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Login"})))}}]),a}(n.Component)),U=O(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.email,r=a.password;e.props.signup({email:n,password:r})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(N.a)({},n,r))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",{className:"login"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,r.a.createElement("b",null,"Email: ")),r.a.createElement("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("b",null,"Password: ")),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Signup"})),r.a.createElement("p",null,"Already have account?"),r.a.createElement(o.b,{to:"/login"}," Login"))}}]),a}(n.Component)),_=O(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={userId:e.props.user._id,user:{}},e.getProfile=Object(g.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.profile(e.props.match.params.id);case 3:a=t.sent,console.log(e.props.match,"res"),e.setState({user:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.deleteAnime=function(){var t=Object(g.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.put("".concat("https://slimu-anime.herokuapp.com","/profile/favorites/").concat(e.props.user._id),{_id:a});case 3:e.getProfile(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getProfile()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"profile"},r.a.createElement("h2",null,"Welcome ",this.state.user.username," "),r.a.createElement("img",{className:"foto",src:this.state.user.image,alt:"profile"}),r.a.createElement(o.b,{to:"/profile/".concat(this.props.match.params.id,"/edit")},"Edit your Profile"),r.a.createElement("section",{className:"myList"},r.a.createElement("p",null,r.a.createElement("b",null,"Your Anime List")),r.a.createElement("div",{className:"myAnimes"},this.state.user.myAnime?this.state.user.myAnime.map((function(t,a){return console.log(t,"data"),r.a.createElement("div",{className:"myAnimu"},r.a.createElement("img",{src:t.image,alt:"anime cover"}),r.a.createElement("div",null,r.a.createElement("h4",null,t.name),r.a.createElement("button",{onClick:function(){return e.deleteAnime(t._id)}},"Remove from List")))})):null)))}}]),a}(n.Component)),F=O(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.email,l=t.image;v.a.put("".concat("https://slimu-anime.herokuapp.com","/profile/").concat(n.props.match.params.id,"/edit"),{username:a,email:r,image:l}).then((function(){n.props.history.push("/profile/".concat(n.props.match.params.id))})).catch((function(e){return console.log(e)}))},n.handleChangeUser=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(N.a)({},a,r))},n.handleFileUpload=function(){var e=Object(g.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("image",t.target.files[0]),e.prev=2,e.next=5,b.handleUpload(a);case 5:r=e.sent,n.setState({image:r.secure_url}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),n.state={username:n.props.user.username,email:n.props.user.email,image:n.props.user.image},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"edit"},r.a.createElement("h2",null,"Edit your Profile"),r.a.createElement("form",{className:"edit-info",onSubmit:this.handleFormSubmit},r.a.createElement("label",null,r.a.createElement("b",null,"Username: ")),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChangeUser(t)}}),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("b",null,"Email: ")),r.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:function(t){return e.handleChangeUser(t)}}),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("b",null,"Image: ")),r.a.createElement("input",{type:"file",name:"image",onChange:function(t){return e.handleFileUpload(t)}}),r.a.createElement("input",{type:"submit",value:"Submit"})))}}]),a}(n.Component)),P=O(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).addToMyList=function(){var e=Object(g.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.image,r=t.name,e.next=3,v.a.post("".concat("https://slimu-anime.herokuapp.com","/profile/favorites/").concat(n.props.user._id),{image:a,name:r});case 3:console.log(a,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={anime:n.props.location.state.anime},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return console.log(this.props,"props"),r.a.createElement("div",{className:"details"},r.a.createElement("h2",null,this.state.anime.titles.en_jp),r.a.createElement("h4",null,this.state.anime.titles.ja_jp),r.a.createElement("img",{src:this.state.anime.posterImage.small,alt:"anime cover"}),r.a.createElement("p",null,r.a.createElement("b",null,"Episodes:"),this.state.anime.episodeCount),r.a.createElement("p",null,r.a.createElement("b",null,"Status:"),this.state.anime.status),r.a.createElement("p",null,this.state.anime.description),this.props.user.myAnime.name!==this.state.anime.titles.en_jp?r.a.createElement("button",{onClick:function(){return e.addToMyList({image:e.state.anime.posterImage.small,name:e.state.anime.titles.en_jp})}},"Add to my List"):null,r.a.createElement(o.b,{to:"/"},r.a.createElement("button",null,"Go Back")))}}]),a}(n.Component)),D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(w,null,r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement(p.d,null,r.a.createElement(L,{path:"/login",component:A}),r.a.createElement(L,{path:"/signup",component:U}),r.a.createElement(p.b,{exact:!0,path:"/",component:S}),r.a.createElement(C,{exact:!0,path:"/profile/:id",component:_}),r.a.createElement(C,{exact:!0,path:"/profile/:id/edit",component:F}),r.a.createElement(C,{exact:!0,path:"/details",component:P}))))}}]),a}(n.Component);i.a.render(r.a.createElement(o.a,null,r.a.createElement(D,null)),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.b7d1892a.chunk.js.map